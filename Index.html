<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Global Aspen Clickstream Tracker</title>
<style>
  body { font-family: Arial, sans-serif; margin: 2rem; background: #e9f0f7; }
  header { color: #004d99; font-size: 2rem; font-weight: bold; }
  nav a { margin-right: 1.5rem; text-decoration: none; color: #0073e6; font-size: 1.2rem; }
  nav a:hover { text-decoration: underline; }
  main { margin-top: 2rem; }
  button {
    background-color: #0073e6;
    color: white;
    border: none;
    padding: 1rem 2rem;
    margin: 0.5rem 0;
    font-size: 1.1rem;
    border-radius: 5px;
    cursor: pointer;
  }
  button:hover { background-color: #005bb5; }
</style>
</head>
<body>
<header>Global Aspen Clickstream Tracker</header>
<nav>
  <a href="index.html">Home</a>
  <a href="products.html">Pharma Products</a>
  <a href="trials.html">Clinical Trials</a>
  <a href="research.html">Research Updates</a>
</nav>
<main>
  <h2>Welcome to Global Aspen</h2>
  <p>Click the buttons below or the navigation links above to explore:</p>
  <button id="btnProducts">Pharma Products</button>
  <button id="btnTrials">Clinical Trials Info</button>
  <button id="btnResearch">Research Updates</button>
</main>

<script>
// Generate user/session ID
function getUserId() {
  return 'user-' + Math.floor(Math.random() * 1000000);
}

// Send click event to backend API
async function sendClickEvent(event) {
  const clickEvent = {
    user_id: getUserId(),
    page: window.location.pathname,
    event_type: event.type,
    timestamp: new Date().toISOString(),
    element: `${event.target.tagName}#${event.target.id || event.target.className || 'unknown'}`
  };
  try {
    await fetch('https://your-backend-api.com/clickstream', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(clickEvent),
      keepalive: true,
    });
  } catch (err) {
    console.error('Click event sending failed:', err);
  }
}

// Attach click listeners to buttons and navigate after sending event
document.querySelectorAll('button').forEach(btn => {
  btn.addEventListener('click', async (event) => {
    await sendClickEvent(event);
    if (event.target.id === "btnProducts") window.location.href = 'products.html';
    else if (event.target.id === "btnTrials") window.location.href = 'trials.html';
    else if (event.target.id === "btnResearch") window.location.href = 'research.html';
  });
});
</script>
</body>
</html>
